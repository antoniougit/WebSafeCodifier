<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Encode unsafe and non-ASCII characters that can create problems on a webpage or email. The HTML Entity Encoder replaces unsafe characters - based on options - with their corresponding hex entities.">
    </meta>
    <meta name="robots" content="noindex,nofollow">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>Codifier</title>

    <style>
        #options,.container{font-size:18px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}#content{max-width:750px}#all+label{color:red}#options{margin-top:20px;user-select:none;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none}h3{display:inline-block}textarea{display:block;height:150px;width:100%}#input,#output{overflow:auto;border:1px solid #c4c4c4;background-color:#f4f4f4}#inputCounter,#outputCounter{font-size:20px;resize:none;height:30px;border:none;background-color:#fff;margin-left:10px}button,button:focus,button[type=submit]{border:none;background-image:none;background-color:transparent;-webkit-box-shadow:none;box-shadow:none;outline:0}#clearButton,#encodeButton{width:120px;height:40px;color:#fff;font-family:Arial;font-size:15px;font-weight:700;display:inline-block;text-decoration:none;margin-top:20px;border-radius:6px;cursor:pointer;padding:6px 24px}#clearButton:active,#encodeButton:active{top:1px}#encodeButton{text-shadow:0 1px 0 #009688;-webkit-box-shadow:inset 0 1px 0 0 #acdc39;box-shadow:inset 0 1px 0 0 #acdc39;background:-o-linear-gradient(top,#4caf50 5%,#8bc34a 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(5%,#4caf50),to(#8bc34a));background:linear-gradient(to bottom,#4caf50 5%,#8bc34a 100%);background-color:#4caf50;border:1px solid #009688}#encodeButton:hover{background:-o-linear-gradient(top,#8bc34a 5%,#4caf50 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(5%,#8bc34a),to(#4caf50));background:linear-gradient(to bottom,#8bc34a 5%,#4caf50 100%);background-color:#8bc34a}#clearButton{text-shadow:0 1px 0 #810e05;-webkit-box-shadow:inset 0 1px 0 0 #f5978e;box-shadow:inset 0 1px 0 0 #f5978e;background:-o-linear-gradient(top,#f24537 5%,#c62d1f 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(5%,#f24537),to(#c62d1f));background:linear-gradient(to bottom,#f24537 5%,#c62d1f 100%);background-color:#f24537;border:1px solid #d02718}#clearButton:hover{background:-o-linear-gradient(top,#c62d1f 5%,#f24537 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(5%,#c62d1f),to(#f24537));background:linear-gradient(to bottom,#c62d1f 5%,#f24537 100%);background-color:#c62d1f}.persadoLogo{margin-top:50px;width:200px}
    </style>

    <script>
        function encodeText() {
            const input = document.getElementById('input'),
                output = document.getElementById('output'),
                checkXML = document.getElementById('xml').checked,
                checkNbsp = document.getElementById('nbsp').checked,
                checkBr = document.getElementById('br').checked,
                checkAll = document.getElementById('all').checked,
                preEncode = input.value,
                encoded = preEncode.replace(/([\u0000-\uD799]|[\uD800-\uDBFF][\uDC00-\uFFFF])/g, function(c) {
                    let c1 = c.charCodeAt(0);
                    if (!checkAll) {
                        if (c1 === 0x20)
                            return (checkNbsp) ? '&nbsp;' : c;
                        if (c1 === 0x0A)
                            return (checkBr) ? '<br />' : c;
                        if (checkXML) {
                            switch (c1) {
                                case 0x3c:
                                    return '&lt;';
                                    break;
                                case 0x3e:
                                    return '&gt;';
                                    break;
                                case 0x22:
                                    return '&quot;';
                                    break;
                                case 0x26:
                                    return '&amp;';
                                    break;
                                case 0x27:
                                    return '&apos;';
                                    break;
                            }
                        }
                    }
                    if (c1 >= 0x20 && c1 <= 0x7e)
                        return c;
                    else if (c.length === 1)
                        return `&#x${c1.toString(16)};`;
                    else if (c.length === 2 && c1 >= 0xD800 && c1 <= 0xDBFF)
                        return `&#x${((c1 - 0xD800) * 0x400 + c.charCodeAt(1) - 0xDC00 + 0x10000).toString(16)};`;
                    else return '';
                });
            output.value = encoded;
            document.getElementById('inputCounter').textContent = input.value.length + ' chars';
            document.getElementById('outputCounter').textContent = output.value.length + ' chars';
        }

        function encodeOnEnter(e) {
            const key = e.which && e.which || e.keyCode;
            if (key === 13 && !e.shiftKey) {
                e.preventDefault();
                encodeText();
            }
        }

        function clearTexts() {
            document.getElementById('input').value = '';
            document.getElementById('output').value = '';
            document.getElementById('inputCounter').textContent = '0 chars';
            document.getElementById('outputCounter').textContent = '0 chars';
        }
    </script>
</head>

<body>
    <div id="container" class="container">
        <header>
            <a class="brand" href="#"><img src="./images/logo.jpg" alt="Codifier logo"></a>
        </header>
        <main>
            <div class="content" id="content">
                <p>Encode unsafe and non-ASCII characters that can create problems on a webpage or email. The Codifer
                    replaces unsafe characters - based on options - with their corresponding hex entities.</p>
                <div id="inputBox">
                    <h3>Original text:</h3>
                    <span id="inputCounter" name="inputCounter">0 chars</span>
                    <textarea id="input" name="input"></textarea>
                </div>
                <div id="options">
                    <div class="checks">
                        <input type="checkbox" id="xml">
                        <label for="xml">Replace &lt; &gt; &quot; &amp; &apos; with named entities</label>
                    </div>
                    <div class="checks">
                        <input type="checkbox" id="nbsp">
                        <label for="nbsp">Replace spaces with &amp;nbsp;</label>
                    </div>
                    <div class="checks">
                        <input type="checkbox" id="br">
                        <label for="br">Replace newlines with &lt;br /&gt;</label>
                    </div>
                    <div class="checks">
                        <input type="checkbox" id="all">
                        <label for="all">Encode ALL except standard chars (overrides other options)</label>
                    </div>
                    <div class="buttons">
                        <button type="submit" id="encodeButton">Encode</button>
                        <button type="submit" id="clearButton">Clear</button>
                    </div>
                </div>
                <div id="outputBox">
                    <h3>Encoded output:</h3>
                    <span id="outputCounter" name="outputCounter">0 chars</span>
                    <textarea id="output" name="output"></textarea>
                </div>
            </div>
        </main>
        <footer>
            <div class="container">
                <a href="http://www.persado.com"><img
                        src="https://www.persado.com/system/assets/uploads/2019/01/persado-logo-tagline.svg"
                        class="persadoLogo" alt="Persado logo"></a>
                <p>&copy; 2020</p>
            </div>
        </footer>
    </div>

    <script>
        document.getElementById('input').addEventListener('keydown', encodeOnEnter, false);
        document.getElementById('encodeButton').addEventListener('click', encodeText, false);
        document.getElementById('clearButton').addEventListener('click', clearTexts, false);
    </script>
</body>

</html>